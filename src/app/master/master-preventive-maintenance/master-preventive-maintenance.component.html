
<div class="row">

  <div class="col-sm-12">
      <app-card>
          <h5>Administracion de hojas de vida </h5>
          <br>

          <div class="form-group row">

            <div class="col-sm-6">
              <h6>Sucursales  <span style="color:red;">*</span> </h6>

              <select class="form-control" (change)="getCustomerRegionals()"  [(ngModel)]="selectedRegionalId" > 
                          <option value="0" selected>Seleccionar sucursal </option>
                           <option   *ngFor="let reg of regional" [ngValue]="reg"   > {{reg.description}}  </option>
                      <!--  <option value="0" selected>Seleccionar perfil</option> -->
                     </select>
          </div>

            <div class="col-sm-6">
              <h6>Cliente  <span style="color:red;">*</span></h6>
              <select class="form-control" (change)="getBranchOffices()" [(ngModel)]="selectedBusinessId"> 
                          <option value="0" selected>Seleccionar cliente </option>
                      <option   *ngFor="let customer of customers" [ngValue]="customer"> {{customer.business_name}}  </option>
                      <!--  <option value="0" selected>Seleccionar perfil</option> -->
              </select>
            </div>
          </div>

          <div class="form-group row">
            <div class="col-sm-4">
              <h6>Sede  <span style="color:red;">*</span></h6>
                <select class="form-control" (change)="getForklifs()" [(ngModel)]="selectedBranchOfficeId" > 
                            <option value="0" selected>Seleccionar sede </option>
                            <option   *ngFor="let branchOffice of branchOffices" [ngValue]="branchOffice"   > {{branchOffice.branch_name}}  </option>
                        <!--  <option value="0" selected>Seleccionar perfil</option> -->
                </select>
              </div>

            <div class="col-sm-4">
              <h6>Equipo  <span style="color:red;">*</span></h6>

              <select class="form-control"   [(ngModel)]="selectedForkliftId" > 
                          <option value="0" selected>Seleccionar equipo </option>
                          <option   *ngFor="let forklift of forklifts" [ngValue]="forklift"   > {{forklift.full_name}}  </option>
                      <!--  <option value="0" selected>Seleccionar perfil</option> -->
                     </select>
            </div>
          </div>

          <div class=" align-buttons" >
            <div >
            <button type="button" style="display:none;" id="showUpdatePreventive" (click)="modalUpdatePreventive.show()" class="btn btn-primary waves-effect">Checkear</button>

            <button class="btn btn-primary" (click)="getPreventiveRoutines()"><i class="icofont icofont-search" ></i>Buscar</button>
          </div>
          </div>
          
          
          <br>
          <div class=" align-buttons" >
            <div >
            
            <button class="btn btn-primary" (click)="modalAssingPreventive.show()" (click)="getWorks()" (click)="getTechnician()"><i class="icofont icofont-search" ></i>Crear</button>
          </div>
          </div>

          <ngx-datatable #table class="data-table" [rows]="currentPreventive"   [columnMode]="'flex'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="'auto'" [limit]="20">

            <ngx-datatable-column  [flexGrow]="2" [sortable]="false" [resizeable]="false"  name="Fecha" [sortable]="false"  prop="date"></ngx-datatable-column>
            <ngx-datatable-column  [flexGrow]="2" name="Ver" [sortable]="false"  sortable="false" prop="status">
            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
    
              <button (click)="updateDate(row)"  class="btn btn-primary btn-icon"><i class="icofont icofont-pencil-alt-5"></i></button>
              <button (click)="deleteEstimateDetail(row)" class="btn btn-danger btn-icon"><i class="icofont icofont-ui-delete"></i></button>
           
            </ng-template>
            </ngx-datatable-column>
          </ngx-datatable>

      </app-card>      
  </div>
</div>

<app-modal-basic #modalAssingPreventive [dialogClass]="'modal-lg'">
  <div class="app-modal-header">

      <h4 class="modal-title">Asignar Mantenimiento Preventivo</h4>
  </div>
  <div class="app-modal-body">
    
    <div class="form-group row">

        <div class="col-4">
          <h6>Fecha de asignación</h6>
          <div class="input-group" dir="ltr">
            <input class="form-control" placeholder="dd-mm-yyyy"   [readonly]="true" 
                  name="fd" [(ngModel)]="fromDate" ngbDatepicker  #dFrom="ngbDatepicker"    (dateSelect)="onDateSelectionFrom($event)">
              <button type="button"  class="btn btn-primary waves-effect"  (click)="dFrom.toggle()"><i class="icofont icofont-ui-calendar"></i></button>
          </div>
        </div>

        <div class="col-4">
          <h6>Horas de asignación</h6>
          <select class="form-control"   [(ngModel)]="selectedHourPreventive">
            <option value="0" selected>Seleccionar hora</option>
            <option value="1">1 </option>
            <option value="2">2 </option>
            <option value="3">3 </option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
            <option value="24">24</option>
          </select>
        </div>
        <div class="col-4">
          <br>
          <select class="form-control"   [(ngModel)]="selectedMinutPreventive">
            <option value="0" selected>Seleccionar minutos</option>
            <option value="1">0</option>
            <option value="2">1</option>
            <option value="3">2</option>
            <option value="4">3</option>
            <option value="5">4</option>
            <option value="6">5</option>
            <option value="7">6</option>
            <option value="8">7</option>
            <option value="9">8</option>
            <option value="10">9</option>
            <option value="11">10</option>
            <option value="12">11</option>
            <option value="13">12</option>
            <option value="14">13</option>
            <option value="15">14</option>
            <option value="16">15</option>
            <option value="17">16</option>
            <option value="18">17</option>
            <option value="19">18</option>
            <option value="20">19</option>
            <option value="21">20</option>
            <option value="22">21</option>
            <option value="23">22</option>
            <option value="24">23</option>
            <option value="25">24</option>
            <option value="26">25</option>
            <option value="27">26</option>
            <option value="28">27</option>
            <option value="29">28</option>
            <option value="30">29</option>
            <option value="31">30</option>
            <option value="32">31</option>
            <option value="33">32</option>
            <option value="34">33</option>
            <option value="35">34</option>
            <option value="36">35</option>
            <option value="37">36</option>
            <option value="38">37</option>
            <option value="39">38</option>
            <option value="40">39</option>
            <option value="41">40</option>
            <option value="42">41</option>
            <option value="43">42</option>
            <option value="44">43</option>
            <option value="45">44</option>
            <option value="46">45</option>
            <option value="47">46</option>
            <option value="48">47</option>
            <option value="49">48</option>
            <option value="50">49</option>
            <option value="51">50</option>
            <option value="52">51</option>
            <option value="53">52</option>
            <option value="54">53</option>
            <option value="55">54</option>
            <option value="56">55</option>
            <option value="57">56</option>
            <option value="58">57</option>
            <option value="59">58</option>
            <option value="60">59</option>
          </select>
        </div>

    </div>

          <div class="form-group row">
  
            <app-card style="width: 100%; height: 300px;">
              <div style="overflow-y: scroll; height: 300px">
                <h5>Preventivo</h5>
                
                <div   *ngFor="let item of routineSelecteds">
                  <input type="checkbox" [(ngModel)]="item.select"  data-md-icheck /> {{item.item}}<br>
                </div>
              </div>
            </app-card>
          </div>
            <br>
            <br>
          <div class="form-group row">
            <app-card style="width: 100%; height: 300px;">
              <div style="overflow-y: scroll; height: 300px">
              <h5>Tecnicos</h5>
              <div   *ngFor="let item of technicianSelecteds" >
                <input type="checkbox" [(ngModel)]="item.select"  data-md-icheck /> {{item.item}}<br>
                </div>
              </div>
            </app-card>
          </div>
          <br>
          <br>
            <div class="align-buttons">
              <button type="button" class="btn btn-default waves-effect" id="assignPrevetiveHide" (click)="addCancelDate()">Cancelar</button>
              <button type="button" style="display: none;" class="btn btn-default waves-effect" id="assignPrevetiveHide" (click)="modalAssingPreventive.hide()">Cancelar</button>
              <button type="submit " class="btn btn-primary m-b-0 " (click)="createPreventive()" >Guardar</button>
            </div>
      </div>          
</app-modal-basic>
<app-modal-basic #modalUpdatePreventive [dialogClass]="'modal-lg'">
  <div class="app-modal-header">

      <h4 class="modal-title">Actualizar asignación Mantenimiento Preventivo</h4>
  </div>
  <div class="app-modal-body">
    
    <div class="form-group row">

        <div class="col-4">
          <h6>Fecha de asignación</h6>
          <div class="input-group" dir="ltr">
            <input class="form-control" placeholder="dd-mm-yyyy"   [readonly]="true" 
                     name="ud" [(ngModel)]="untilDate" ngbDatepicker  #dUntil="ngbDatepicker"    (dateSelect)="onDateSelectionUntil($event)">
                <button type="button"  class="btn btn-primary waves-effect"  (click)="dUntil.toggle()"><i class="icofont icofont-ui-calendar"></i></button>
           </div>
        </div>

        <!-- <div class="col-4">
          <h6>Horas de asignación</h6>
          <select class="form-control"   [(ngModel)]="selectedHourUpdatePreventive">
            <option value="0" selected>Seleccionar hora</option>
            <option value="1">01 </option>
            <option value="2">02 </option>
            <option value="3">03 </option>
            <option value="4">04</option>
            <option value="5">05</option>
            <option value="6">06</option>
            <option value="7">07</option>
            <option value="8">08</option>
            <option value="9">09</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
            <option value="24">24</option>
          </select>
        </div>
        <div class="col-4">
          <br>
          <select class="form-control"   [(ngModel)]="selectedMinutUpdatePreventive">
            <option value="0" selected>Seleccionar minutos</option>
            <option value="1">00</option>
            <option value="2">01</option>
            <option value="3">02</option>
            <option value="4">03</option>
            <option value="5">04</option>
            <option value="6">05</option>
            <option value="7">06</option>
            <option value="8">07</option>
            <option value="9">08</option>
            <option value="10">09</option>
            <option value="11">10</option>
            <option value="12">11</option>
            <option value="13">12</option>
            <option value="14">13</option>
            <option value="15">14</option>
            <option value="16">15</option>
            <option value="17">16</option>
            <option value="18">17</option>
            <option value="19">18</option>
            <option value="20">19</option>
            <option value="21">20</option>
            <option value="22">21</option>
            <option value="23">22</option>
            <option value="24">23</option>
            <option value="25">24</option>
            <option value="26">25</option>
            <option value="27">26</option>
            <option value="28">27</option>
            <option value="29">28</option>
            <option value="30">29</option>
            <option value="31">30</option>
            <option value="32">31</option>
            <option value="33">32</option>
            <option value="34">33</option>
            <option value="35">34</option>
            <option value="36">35</option>
            <option value="37">36</option>
            <option value="38">37</option>
            <option value="39">38</option>
            <option value="40">39</option>
            <option value="41">40</option>
            <option value="42">41</option>
            <option value="43">42</option>
            <option value="44">43</option>
            <option value="45">44</option>
            <option value="46">45</option>
            <option value="47">46</option>
            <option value="48">47</option>
            <option value="49">48</option>
            <option value="50">49</option>
            <option value="51">50</option>
            <option value="52">51</option>
            <option value="53">52</option>
            <option value="54">53</option>
            <option value="55">54</option>
            <option value="56">55</option>
            <option value="57">56</option>
            <option value="58">57</option>
            <option value="59">58</option>
            <option value="60">59</option>
          </select>
        </div> -->

    </div>

          <div class="form-group row">
  
            <app-card style="width: 100%; height: 300px;">
              <div style="overflow-y: scroll; height: 300px">
                <h5>Preventivo</h5>
                
                <div   *ngFor="let item of routineSelecteds">
                  <input type="checkbox" [(ngModel)]="item.select"  data-md-icheck /> {{item.item}}<br>
                </div>
              </div>
            </app-card>
          </div>
            <br>
            <br>
          <div class="form-group row">
            <app-card style="width: 100%; height: 300px;">
              <div style="overflow-y: scroll; height: 300px">
              <h5>Tecnicos</h5>
              <div   *ngFor="let item of technicianSelecteds" >
                <input type="checkbox" [(ngModel)]="item.select"  data-md-icheck /> {{item.item}}<br>
                </div>
              </div>
            </app-card>
          </div>
          <br>
          <br>
            <div class="align-buttons">
              <button type="button" class="btn btn-default waves-effect" id="assignPreveUpdatetiveHide" (click)="addCancelUpdateDate()">Cancelar</button>
              <button type="button" style="display: none;" class="btn btn-default waves-effect" id="assignUpdatePrevetiveHide" (click)="modalUpdatePreventive.hide()">Cancelar</button>
              <button type="submit " class="btn btn-primary m-b-0 " (click)="updatePreventive()" >Guardar</button>
            </div>
      </div>          
</app-modal-basic>
